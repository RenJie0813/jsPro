"use strict";function getData(){var e=+localStorage.editVerId;sendRequest("ver.getInfo",[e],function(e){render(e.data)})}function render(e){$("#name").val(e.name),$("#id").val(e.id),$("#hinxVer").val(e.hinxVer),$("#serverVer").val(e.serverVer),e.serverLib&&$("#serverLib").val(e.serverLib),firstRender&&(e.isFixed?$("#fixedDiv").append('\n            <input type="radio" name="Fiexed" value=\'true\' checked="checked" disabled="disabled">固定\n            <input type="radio" name="Fiexed" value=\'false\' style="margin-left: 3.5rem" disabled="disabled">不固定\n        '):$("#fixedDiv").append('\n            <input type="radio" name="Fiexed" value=\'true\' disabled="disabled">固定\n            <input type="radio" name="Fiexed" value=\'false\' checked="checked" style="margin-left: 2rem" disabled="disabled">不固定\n        '),firstRender=!1)}$(document).ready(function(){getData(),$(".addinfo_btn").on("click",function(){var e=+$("#serverVer").val(),r=+$("#id").val(),i=$("#name").val(),n=$("#hinxVer").val(),a=+$("#serverLib").val(),s=[r,{serverVer:e,id:r,name:i,hinxVer:n,serverLib:a}];sendRequest("ver.upBase",s,function(e){0===e.code?(alert("修改成功"),getData()):alert("修改失败")})});var e={old:null,new:null,switched:!1},r={};$("#autoBtn").unbind().bind("click",function(){var r=JSON.parse(sessionStorage.newVer),i=$("#hinxVer"),n=$("#serverVer"),a=$("#serverLib");e.switched?(n.val(e.old.serverVer),i.val(e.old.hinxVer),e.old.serverLib&&a.val(e.old.serverLib),e.switched=!1):(e.old={hinxVer:i.val(),serverVer:+n.val(),serverLib:+a.val()},n.val(+r.serverVer),i.val(r.hinxVer),r.serverLib&&a.val(r.serverLib),e.new={hinxVer:i.val(),serverVer:+n.val(),serverLib:+a.val()},e.switched=!0)}),$("#handBtn").on("click",function(){$(".spinner").css("display","block"),sendRequest("ver.getNewVer",[],function(e){$(".spinner").css("display","none"),sessionStorage.newVer=JSON.stringify(e.data)})}),$(".lineEdit").on("click",function(){var e=JSON.parse(sessionStorage.newVer),i=$(".lineEdit").index(this);console.log(i);var n="";switch(i){case 0:n="hinxVer";break;case 1:n="serverVer";break;case 2:n="serverLib"}console.log(n),r[n]||(r[n]={old:null,new:null,switched:!1}),r[n].old&&r[n].new&&r[n].switched?($("#"+n).val(r[n].old),r[n].switched=!1):"serverLib"===n?e[n]&&(r[n].old=$("#"+n).val(),$("#"+n).val(e[n]),r[n].new=e[n],r[n].switched=!0):(r[n].old=$("#"+n).val(),$("#"+n).val(e[n]),r[n].new=e[n],r[n].switched=!0)})});var firstRender=!0;